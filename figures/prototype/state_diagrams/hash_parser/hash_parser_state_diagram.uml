@startuml
!theme plain

skin rose

title Hash Parser

state RUNNING {
IDLE:Pending hash.
STOP:Stop delimiter reached.\nAwaiting hash start delimiter.
START:
ESPACE:Store escape character.
DATA:Store hash character.
  IDLE <- IDLE: else
  IDLE ---> START:if data_in = \nstart delimiter
  STOP --> START: if data_in = start delimiter
  STOP <- STOP: else
  START --> DATA
  ESPACE -> DATA
  DATA --> ESPACE: if data_in = escape
  DATA -u-> STOP: elsif data_in =\nstop delimiter
  DATA <-u- DATA: else
}
[*] --> IDLE

RESET:
RUNNING --> RESET: if reset = 1
RESET -l-> IDLE
@enduml