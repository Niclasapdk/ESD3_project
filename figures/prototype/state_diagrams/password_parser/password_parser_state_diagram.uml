@startuml
!theme plain

skin rose

title Password Parser

state RUNNING {
IDLE:Pending password.
STOP:Stop delimiter reached.\nAwaiting password start delimiter.
START:
ESPACE:Store escape.
DATA:Store password.
  IDLE <- IDLE: else
  IDLE --> START: if data_in = \nstart delimiter
  STOP --> START: if data_in = start delimiter
  STOP <- STOP: else
  START --> DATA
  ESPACE -l-> DATA
  DATA --> ESPACE: if data_in = escape character  
  DATA -u-> STOP: elsif data_in =\nstop delimiter
  DATA <-- DATA: else
}
[*] --> IDLE

RESET:
RUNNING -u-> RESET: if reset = 1
RESET -l-> IDLE
@enduml